(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10160,e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.s(["default",()=>t])},78917,e=>{"use strict";let t=(0,e.i(75254).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],78917)},67240,e=>{"use strict";let t=(0,e.i(75254).default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);e.s(["RotateCcw",()=>t],67240)},59559,e=>{"use strict";var t=e.i(71645),r=e.i(74080),a=e.i(88860),s=e.i(7670),i=e.i(48337),n=e.i(13659),l=e.i(73393),o=e.i(51883);function c(){return(c=Object.assign.bind()).apply(null,arguments)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}var m={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function x(e){var r,{data:a,iconType:s,inactiveColor:i}=e,l=32/6,o=32/3,c=a.inactive?i:a.color,m=null!=s?s:a.type;if("none"===m)return null;if("plainline"===m)return t.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:null==(r=a.payload)?void 0:r.strokeDasharray,x1:0,y1:16,x2:32,y2:16,className:"recharts-legend-icon"});if("line"===m)return t.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(16,"h").concat(o,"\n            A").concat(l,",").concat(l,",0,1,1,").concat(2*o,",").concat(16,"\n            H").concat(32,"M").concat(2*o,",").concat(16,"\n            A").concat(l,",").concat(l,",0,1,1,").concat(o,",").concat(16),className:"recharts-legend-icon"});if("rect"===m)return t.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(4,"h").concat(32,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(t.isValidElement(a.legendIcon)){var x=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){var a,s,i;a=e,s=t,i=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in a?Object.defineProperty(a,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[s]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},a);return delete x.legendIcon,t.cloneElement(a.legendIcon,x)}return t.createElement(n.Symbols,{fill:c,cx:16,cy:16,size:32,sizeType:"diameter",type:m})}function p(e){var{payload:r,iconSize:a,layout:n,formatter:o,inactiveColor:d,iconType:m}=e,p={x:0,y:0,width:32,height:32},u={display:"horizontal"===n?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map((r,n)=>{var f=r.formatter||o,y=(0,s.clsx)({"recharts-legend-item":!0,["legend-item-".concat(n)]:!0,inactive:r.inactive});if("none"===r.type)return null;var b=r.inactive?d:r.color,g=f?f(r.value,r,n):r.value;return t.createElement("li",c({className:y,style:u,key:"legend-item-".concat(n)},(0,l.adaptEventsOfChild)(e,r,n)),t.createElement(i.Surface,{width:a,height:a,viewBox:p,style:h,"aria-label":"".concat(g," legend icon")},t.createElement(x,{data:r,iconType:m,inactiveColor:d})),t.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},g))})}var u=e=>{var r=(0,o.resolveDefaultProps)(e,m),{payload:a,layout:s,align:i}=r;return a&&a.length?t.createElement("ul",{className:"recharts-default-legend",style:{padding:0,margin:0,textAlign:"horizontal"===s?i:"left"}},t.createElement(p,c({},r,{payload:a}))):null},h=e.i(51587),f=e.i(27241),y=e.i(21307),b=e.i(35709),g=e.i(46710),j=e.i(93882),v=["contextPayload"];function N(){return(N=Object.assign.bind()).apply(null,arguments)}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach(function(t){var a,s,i;a=e,s=t,i=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in a?Object.defineProperty(a,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[s]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function C(e){return e.value}function k(e){var{contextPayload:r}=e,a=function(e,t){if(null==e)return{};var r,a,s=function(e,t){if(null==e)return{};var r={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,v),s=(0,h.getUniqPayload)(r,e.payloadUniqBy,C),i=w(w({},a),{},{payload:s});return t.isValidElement(e.content)?t.cloneElement(e.content,i):"function"==typeof e.content?t.createElement(e.content,i):t.createElement(u,i)}function E(e){var r=(0,f.useAppDispatch)();return(0,t.useEffect)(()=>{r((0,j.setLegendSettings)(e))},[r,e]),null}function A(e){var r=(0,f.useAppDispatch)();return(0,t.useEffect)(()=>(r((0,j.setLegendSize)(e)),()=>{r((0,j.setLegendSize)({width:0,height:0}))}),[r,e]),null}var P={align:"center",iconSize:14,inactiveColor:"#ccc",itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function O(e){var s,i=(0,o.resolveDefaultProps)(e,P),n=(0,f.useAppSelector)(y.selectLegendPayload),l=(0,a.useLegendPortal)(),c=(0,g.useMargin)(),{width:d,height:m,wrapperStyle:x,portal:p}=i,[u,h]=(0,b.useElementOffset)([n]),j=(0,g.useChartWidth)(),v=(0,g.useChartHeight)();if(null==j||null==v)return null;var S=j-((null==c?void 0:c.left)||0)-((null==c?void 0:c.right)||0),C=(s=i.layout,"vertical"===s&&null!=m?{height:m}:"horizontal"===s?{width:d||S}:null),O=p?x:w(w({position:"absolute",width:(null==C?void 0:C.width)||d||"auto",height:(null==C?void 0:C.height)||m||"auto"},function(e,t,r,a,s,i){var n,l,{layout:o,align:c,verticalAlign:d}=t;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(n="center"===c&&"vertical"===o?{left:((a||0)-i.width)/2}:"right"===c?{right:r&&r.right||0}:{left:r&&r.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(l="middle"===d?{top:((s||0)-i.height)/2}:"bottom"===d?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),w(w({},n),l)}(x,i,c,j,v,u)),x),T=null!=p?p:l;if(null==T||null==n)return null;var L=t.createElement("div",{className:"recharts-legend-wrapper",style:O,ref:h},t.createElement(E,{layout:i.layout,align:i.align,verticalAlign:i.verticalAlign,itemSorter:i.itemSorter}),!p&&t.createElement(A,{width:u.width,height:u.height}),t.createElement(k,N({},i,C,{margin:c,chartWidth:j,chartHeight:v,contextPayload:n})));return(0,r.createPortal)(L,T)}O.displayName="Legend",e.s(["Legend",()=>O],59559)},75657,e=>{"use strict";var t=e.i(17586);function r(e,r,a,s,i){var n;let l=function(e){if(0===e.length)return"";let t=[...e].sort();return 1===t.length?String(t[0]):t.every((e,r)=>0===r||e===t[r-1]+1)?`${t[0]}\u2013${t[t.length-1]}`:t.join(", ")}(r.years),o=(n=r.dataTypes,n.map(e=>i(`common.${e}`)).join(", "));return"pessimistic"===e?i("scenario.descPessimistic",{count:s,years:l,types:o}):"realistic"===e?i("scenario.descRealistic",{count:s,years:l,types:o}):a.enabled?i("scenario.descOptimisticMetr",{count:s,years:l,multiplier:(0,t.computeMETRMultiplier)(a).toFixed(1),doubling:a.doublingPeriodMonths,horizon:a.futureOffsetMonths}):i("scenario.descOptimistic",{count:s,years:l,types:o})}e.s(["generateScenarioDescription",()=>r])},96673,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),s=e.i(9694),i=e.i(75225),n=e.i(29228),l=e.i(55706),o=e.i(85183),c=e.i(93230),d=e.i(72526),m=e.i(34239),x=e.i(31195),p=e.i(22787),u=e.i(59559),h=e.i(17394),f=e.i(17586),y=e.i(65143),b=e.i(46019),g=e.i(22016),j=e.i(64659),v=e.i(55900),N=e.i(67240),S=e.i(78917);e.i(57229);var w=e.i(44674),C=e.i(75657);let k=["empirical","survey","vendor","anecdotal"],E={empirical:"Emp",survey:"Srv",vendor:"Vnd",anecdotal:"Anc"},A={pessimistic:{labelKey:"roi.pessimistic",modelKey:"scenario.modelPessimistic",color:"#ef4444",activeClass:"bg-red-500/15 text-red-400 border-red-500/30",bgClass:"border-red-500/20"},realistic:{labelKey:"roi.realistic",modelKey:"scenario.modelRealistic",color:"#f59e0b",activeClass:"bg-amber-500/15 text-amber-400 border-amber-500/30",bgClass:"border-amber-500/20"},optimistic:{labelKey:"roi.optimistic",modelKey:"scenario.modelOptimistic",color:"#10b981",activeClass:"bg-emerald-500/15 text-emerald-400 border-emerald-500/30",bgClass:"border-emerald-500/20"}};function P(){let{configs:e,setConfigs:a,resetToDefaults:s}=(0,y.useScenario)(),{t:i}=(0,w.useTranslation)(),[n,l]=(0,r.useState)(!0),o=(0,r.useMemo)(()=>(0,f.computeMETRMultiplier)(e.metrConfig),[e.metrConfig]);return(0,t.jsxs)("div",{id:"scenarios",className:"bg-surface border border-border rounded-xl",children:[(0,t.jsxs)("button",{onClick:()=>l(!n),className:"w-full flex items-center justify-between p-5 text-left",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold text-foreground",children:i("scenario.title")}),n?(0,t.jsx)(v.ChevronUp,{className:"w-4 h-4 text-muted"}):(0,t.jsx)(j.ChevronDown,{className:"w-4 h-4 text-muted"})]}),n&&(0,t.jsxs)("div",{className:"px-5 pb-5 space-y-5",children:[(0,t.jsx)("div",{className:"grid grid-cols-3 gap-5",children:["pessimistic","realistic","optimistic"].map(r=>{let s,n,l,c,d,m=A[r],{factCount:x,sourceCount:p}=(s=e[r],l=new Set((n=h.facts.filter(e=>s.years.includes(e.year)&&s.dataTypes.includes(e.dataType))).map(e=>e.source)),{factCount:n.length,sourceCount:l.size});return(0,t.jsxs)("div",{className:`border rounded-lg p-4 space-y-3 ${m.bgClass}`,children:[(0,t.jsx)("h3",{className:"text-sm font-semibold",style:{color:m.color},children:i(m.labelKey)}),(0,t.jsx)("p",{className:"text-[10px] text-muted -mt-1",children:i(m.modelKey)}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-xs text-muted mb-1.5",children:[i("scenario.years"),":"]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:h.ALL_YEARS.map(s=>{let i=e[r].years.includes(s);return(0,t.jsx)("button",{onClick:()=>{let t,i;0!==(i=(t=e[r].years).includes(s)?t.filter(e=>e!==s):[...t,s].sort()).length&&a({...e,[r]:{...e[r],years:i}})},className:`px-2 py-1 text-xs rounded-md border transition-colors ${i?m.activeClass:"bg-zinc-50 text-muted border-border hover:text-foreground opacity-50"}`,children:s},s)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-xs text-muted mb-1.5",children:[i("scenario.sources"),":"]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:k.map(s=>{let i=e[r].dataTypes.includes(s);return(0,t.jsx)("button",{onClick:()=>{let t,i;0!==(i=(t=e[r].dataTypes).includes(s)?t.filter(e=>e!==s):[...t,s]).length&&a({...e,[r]:{...e[r],dataTypes:i}})},className:`px-2 py-1 text-xs rounded-md border transition-colors ${i?m.activeClass:"bg-zinc-50 text-muted border-border hover:text-foreground opacity-50"}`,children:E[s]},s)})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("p",{className:"text-xs text-muted tabular-nums",children:[i("scenario.matchingFacts",{count:x})," · ",i("scenario.matchingSources",{count:p})]}),(0,t.jsxs)(g.default,{href:(c=e[r],(d=new URLSearchParams).set("years",c.years.join(",")),d.set("dataTypes",c.dataTypes.join(",")),`/sources?${d.toString()}`),className:"flex items-center gap-1 text-xs font-medium hover:underline transition-colors",style:{color:m.color},children:[i("scenario.viewSources"),(0,t.jsx)(S.ExternalLink,{className:"w-3 h-3"})]})]}),"optimistic"===r&&(0,t.jsxs)("div",{className:"border border-emerald-500/20 rounded-lg p-3 space-y-2 bg-emerald-500/5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-emerald-400",children:i("scenario.metrMultiplier")}),(0,t.jsxs)(g.default,{href:"/sources?search=METR+%E2%80%94+AI+Task-Completion+Time+Horizons",className:"flex items-center gap-1 text-xs text-emerald-400 hover:underline",children:["METR Research",(0,t.jsx)(S.ExternalLink,{className:"w-3 h-3"})]})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-xs text-foreground cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:e.metrConfig.enabled,onChange:t=>a({...e,metrConfig:{...e.metrConfig,enabled:t.target.checked}}),className:"rounded border-border accent-emerald-500"}),i("scenario.metrEnabled")]}),e.metrConfig.enabled&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"text-xs text-muted w-24",children:[i("scenario.doublingPeriod"),":"]}),(0,t.jsx)("input",{type:"number",min:1,max:120,value:e.metrConfig.doublingPeriodMonths,onChange:t=>a({...e,metrConfig:{...e.metrConfig,doublingPeriodMonths:Math.max(1,parseInt(t.target.value)||1)}}),className:"w-16 px-2 py-1 text-xs rounded border border-border bg-surface text-foreground"}),(0,t.jsx)("span",{className:"text-xs text-muted",children:i("scenario.months")})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"text-xs text-muted w-24",children:[i("scenario.horizon"),":"]}),(0,t.jsx)("input",{type:"number",min:1,max:120,value:e.metrConfig.futureOffsetMonths,onChange:t=>a({...e,metrConfig:{...e.metrConfig,futureOffsetMonths:Math.max(1,parseInt(t.target.value)||1)}}),className:"w-16 px-2 py-1 text-xs rounded border border-border bg-surface text-foreground"}),(0,t.jsx)("span",{className:"text-xs text-muted",children:i("scenario.months")})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsxs)("span",{className:"text-xs text-muted",children:[i("scenario.adoptionElasticity"),":"]}),(0,t.jsx)("span",{className:"text-xs font-medium text-emerald-400 tabular-nums",children:(e.metrConfig.adoptionElasticity??.5).toFixed(1)})]}),(0,t.jsx)("input",{type:"range",min:10,max:300,step:10,value:Math.round((e.metrConfig.adoptionElasticity??.5)*100),onChange:t=>a({...e,metrConfig:{...e.metrConfig,adoptionElasticity:Number(t.target.value)/100}}),className:"w-full accent-emerald-500 h-1"}),(0,t.jsxs)("div",{className:"flex justify-between mt-0.5",children:[(0,t.jsx)("span",{className:"text-[10px] text-muted",children:"0.1"}),(0,t.jsx)("span",{className:"text-[10px] text-muted",children:"3.0"})]}),(0,t.jsx)("p",{className:"text-[10px] text-muted mt-0.5",children:i("scenario.adoptionElasticityDesc")})]}),(0,t.jsxs)("p",{className:"text-xs font-medium text-emerald-400",children:["→ ",i("scenario.multiplierResult",{multiplier:o.toFixed(1),percent:Math.round((o-1)*100)})]})]})]}),(0,t.jsx)("p",{className:"text-xs text-muted leading-relaxed italic",children:(0,C.generateScenarioDescription)(r,e[r],e.metrConfig,x,i)})]},r)})}),(0,t.jsx)("div",{className:"flex justify-start",children:(0,t.jsxs)("button",{onClick:s,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs text-muted hover:text-foreground transition-colors",children:[(0,t.jsx)(N.RotateCcw,{className:"w-3 h-3"}),i("scenario.resetDefaults")]})})]})]})}let O={empirical:"#10b981",survey:"#3b82f6",vendor:"#8b5cf6",anecdotal:"#f97316"},T={empirical:"bg-emerald-500/20 text-emerald-400",survey:"bg-blue-500/20 text-blue-400",vendor:"bg-purple-500/20 text-purple-400",anecdotal:"bg-orange-500/20 text-orange-400"},L={1:"#ef4444",2:"#f59e0b",3:"#10b981"},M={Strategy:"#f59e0b",Design:"#8b5cf6",Spec:"#06b6d4",Dev:"#3b82f6",QA:"#10b981",DevOps:"#f97316"},z=["empirical","survey","vendor","anecdotal"],R={pessimistic:"roi.pessimistic",realistic:"roi.realistic",optimistic:"roi.optimistic"};function D(){let e=(0,a.useRouter)(),{t:g}=(0,w.useTranslation)(),{configs:j}=(0,y.useScenario)(),v=(0,r.useRef)(null),[N,S]=(0,r.useState)([...h.PHASES]),[C,k]=(0,r.useState)([...z]),E=(0,r.useMemo)(()=>h.facts.filter(e=>C.includes(e.dataType)),[C]),A=(0,r.useMemo)(()=>(0,f.computeTrendData)(E).filter(e=>N.includes(e.phase)),[E,N]),D=(0,r.useMemo)(()=>h.ALL_YEARS.map(e=>{let t={year:String(e)};return A.forEach(r=>{let a=r.points.find(t=>t.year===e);t[r.phase]=a?.mean,t[`${r.phase}_count`]=a?.count}),t}),[A]),K=(0,r.useMemo)(()=>{let e={teamSize:Math.round(1818.1818181818182),avgSalary:55e3,hoursPerYear:1600,itBudget:1e8,includedPhases:[...h.PHASES],phaseWeights:h.PHASE_WEIGHTS,inhouseRatios:{Strategy:1,Design:1,Spec:1,Dev:.2,QA:1,DevOps:1},scenarioConfigs:j,transformationCosts:{consulting:2e6,training:1e6,internal:1e6},timeframeYears:1};return(0,f.calculateConfiguredScenarios)(e,h.facts)},[j]),B=["pessimistic","realistic","optimistic"],Y=(0,r.useMemo)(()=>B.map(e=>{let t={scenario:g(R[e])};for(let r of h.PHASES){let a=K.scenarios[e].phaseBreakdown.find(e=>e.phase===r);t[r]=a?a.medianImpact:0}return t}),[K,g]),$=(0,r.useMemo)(()=>{let e=h.facts.length,t=new Set(h.facts.map(e=>e.source)).size,r=h.facts.map(e=>e.year),a=`${Math.min(...r)}–${Math.max(...r)}`,s=h.facts.reduce((e,t)=>e+t.credibility,0)/e,i=h.ALL_YEARS.map(e=>({year:String(e),count:h.facts.filter(t=>t.year===e).length})),n=["empirical","survey","vendor","anecdotal"],l=n.map(e=>({dataType:e,label:e.charAt(0).toUpperCase()+e.slice(1),count:h.facts.filter(t=>t.dataType===e).length})),o=h.PHASES.map(e=>({phase:e,count:h.facts.filter(t=>t.phase===e).length})),c=h.PHASES.map(e=>{let t={phase:e};return h.ALL_YEARS.forEach(r=>{t[String(r)]=h.facts.filter(t=>t.phase===e&&t.year===r).length}),t}),d=n.map(e=>{let t={dataType:e.charAt(0).toUpperCase()+e.slice(1),rawDataType:e};return h.ALL_YEARS.forEach(r=>{t[String(r)]=h.facts.filter(t=>t.dataType===e&&t.year===r).length}),t}),m=Math.max(...c.flatMap(e=>h.ALL_YEARS.map(t=>e[String(t)])),1),x=Math.max(...d.flatMap(e=>h.ALL_YEARS.map(t=>e[String(t)])),1),p=h.PHASES.map(e=>{let t=h.facts.filter(t=>t.phase===e);return{phase:e,low:t.filter(e=>1===e.credibility).length,medium:t.filter(e=>2===e.credibility).length,high:t.filter(e=>3===e.credibility).length}}),u=new Map;return h.facts.forEach(e=>{let t=u.get(e.source)||{count:0,phases:new Set,dataTypes:new Set,totalImpact:0};t.count++,t.phases.add(e.phase),t.dataTypes.add(e.dataType),t.totalImpact+=e.impactPct,u.set(e.source,t)}),{totalFacts:e,uniqueSources:t,yearSpan:a,avgCredibility:s,byYear:i,byDataType:l,byPhase:o,yearPhaseMatrix:c,yearDataTypeMatrix:d,maxYearPhase:m,maxYearDt:x,credByPhase:p,topSources:[...u.entries()].map(([e,t])=>({name:e,count:t.count,phases:[...t.phases].sort(),dataTypes:[...t.dataTypes].sort(),avgImpact:t.totalImpact/t.count})).sort((e,t)=>t.count-e.count).slice(0,10)}},[]);function I(t){let r=new URLSearchParams(t).toString();e.push(`/sources?${r}`)}function H(e){return t=>{t?.payload&&e(t.payload)}}function _(e,t){if(0===e)return"bg-transparent";let r=Math.round(e/t*100);return r>=80?"bg-accent/80 text-white":r>=60?"bg-accent/60 text-white":r>=40?"bg-accent/40 text-foreground":r>=20?"bg-accent/20 text-foreground":"bg-accent/10 text-foreground"}return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:g("analytics.title")}),(0,t.jsx)("p",{className:"text-sm text-muted mt-1 max-w-3xl leading-relaxed",children:g("analytics.description",{totalFacts:$.totalFacts,uniqueSources:$.uniqueSources,yearSpan:$.yearSpan})}),(0,t.jsx)("p",{className:"text-xs text-muted/70 mt-2 italic",children:g("analytics.tip")})]}),(0,t.jsx)(b.default,{targetRef:v,title:g("analytics.title")})]}),(0,t.jsx)(P,{}),(0,t.jsxs)("div",{className:"bg-surface border border-border rounded-xl p-5",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold text-foreground mb-4",children:g("analytics.impactByPhase")}),(0,t.jsx)(x.ResponsiveContainer,{width:"100%",height:300,children:(0,t.jsxs)(s.BarChart,{data:Y,margin:{top:10,right:10,bottom:10,left:10},children:[(0,t.jsx)(d.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e4e4e7",vertical:!1}),(0,t.jsx)(o.XAxis,{dataKey:"scenario",tick:{fill:"#71717a",fontSize:12},axisLine:{stroke:"#d4d4d8"},tickLine:!1}),(0,t.jsx)(c.YAxis,{tick:{fill:"#71717a",fontSize:12},axisLine:{stroke:"#d4d4d8"},tickLine:!1,tickFormatter:e=>`${e}%`}),(0,t.jsx)(m.Tooltip,{content:({active:e,payload:r,label:a})=>e&&r?.length?(0,t.jsxs)("div",{className:"rounded-lg border text-xs",style:{backgroundColor:"#18181b",border:"1px solid #27272a",padding:"8px 12px"},children:[(0,t.jsx)("p",{style:{color:"#a1a1aa",marginBottom:4},children:a}),r.map(e=>(0,t.jsxs)("p",{style:{color:e.color},children:[e.name,": ",e.value,"%"]},e.dataKey))]}):null}),(0,t.jsx)(u.Legend,{iconSize:10,wrapperStyle:{fontSize:"11px",color:"#a1a1aa"}}),h.PHASES.map(e=>(0,t.jsx)(i.Bar,{dataKey:e,name:e,fill:M[e],fillOpacity:.7,radius:[2,2,0,0]},e))]})})]}),(0,t.jsxs)("div",{ref:v,className:"space-y-8",children:[(0,t.jsx)("div",{className:"grid grid-cols-4 gap-4",children:[{label:g("analytics.totalFacts"),value:$.totalFacts},{label:g("analytics.uniqueSources"),value:$.uniqueSources},{label:g("analytics.yearSpan"),value:$.yearSpan},{label:g("analytics.avgCredibility"),value:$.avgCredibility.toFixed(1)+" / 3"}].map(e=>(0,t.jsxs)("div",{className:"bg-surface border border-border rounded-xl p-5",children:[(0,t.jsx)("p",{className:"text-xs text-muted uppercase tracking-wide",children:e.label}),(0,t.jsx)("p",{className:"text-2xl font-bold text-foreground mt-1",children:e.value})]},e.label))}),(0,t.jsxs)("div",{className:"bg-surface border border-border rounded-xl p-5",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold text-foreground mb-4",children:g("analytics.impactTrends")}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[(0,t.jsxs)("span",{className:"text-xs text-muted mr-1",children:[g("common.phase"),":"]}),h.PHASES.map(e=>{let r=N.includes(e);return(0,t.jsx)("button",{onClick:()=>{S(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},className:`text-xs px-2.5 py-1 rounded-full border transition-colors ${r?"border-transparent text-white":"border-border text-muted bg-transparent hover:bg-surface-hover"}`,style:r?{backgroundColor:M[e]}:void 0,children:e},e)})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-5",children:[(0,t.jsxs)("span",{className:"text-xs text-muted mr-1",children:[g("common.type"),":"]}),z.map(e=>{let r=C.includes(e);return(0,t.jsx)("button",{onClick:()=>{k(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},className:`text-xs px-2.5 py-1 rounded-full border transition-colors ${r?"border-transparent text-white":"border-border text-muted bg-transparent hover:bg-surface-hover"}`,style:r?{backgroundColor:O[e]}:void 0,children:g(`common.${e}`)},e)})]}),(0,t.jsx)(x.ResponsiveContainer,{width:"100%",height:320,children:(0,t.jsxs)(n.LineChart,{data:D,margin:{top:5,right:20,bottom:5,left:0},children:[(0,t.jsx)(d.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e4e4e7",vertical:!1}),(0,t.jsx)(o.XAxis,{dataKey:"year",tick:{fill:"#71717a",fontSize:12}}),(0,t.jsx)(c.YAxis,{tick:{fill:"#71717a",fontSize:12},tickFormatter:e=>`${e}%`,domain:["dataMin - 5","dataMax + 5"]}),(0,t.jsx)(m.Tooltip,{content:({active:e,payload:r,label:a})=>e&&r?.length?(0,t.jsxs)("div",{className:"rounded-lg border text-xs",style:{backgroundColor:"#18181b",border:"1px solid #27272a",padding:"8px 12px"},children:[(0,t.jsx)("p",{style:{color:"#a1a1aa",marginBottom:4},children:a}),r.map(e=>(0,t.jsxs)("p",{style:{color:e.color},children:[e.name,": ",e.value,"%"," ",(0,t.jsxs)("span",{style:{color:"#71717a"},children:["(n=",e.payload[`${e.dataKey}_count`]??0,")"]})]},e.dataKey))]}):null}),(0,t.jsx)(u.Legend,{iconSize:10,wrapperStyle:{fontSize:"11px",color:"#a1a1aa"}}),A.map(e=>(0,t.jsx)(l.Line,{type:"monotone",dataKey:e.phase,name:e.phase,stroke:M[e.phase],strokeWidth:2,dot:{r:4,fill:M[e.phase]},connectNulls:!0},e.phase))]})}),(0,t.jsx)("div",{className:"mt-5 overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-border",children:[(0,t.jsx)("th",{className:"text-left text-muted text-xs py-2 pr-3",children:g("common.phase")}),h.ALL_YEARS.map(e=>(0,t.jsx)("th",{className:"text-center text-muted text-xs py-2 px-3",children:e},e))]})}),(0,t.jsx)("tbody",{children:A.map(e=>(0,t.jsxs)("tr",{className:"border-b border-border/50",children:[(0,t.jsx)("td",{className:"py-1.5 pr-3 font-medium",style:{color:M[e.phase]},children:e.phase}),h.ALL_YEARS.map(r=>{let a=e.points.find(e=>e.year===r);return(0,t.jsx)("td",{className:"text-center px-3 py-1.5",children:a?(0,t.jsxs)("button",{onClick:()=>I({years:String(r),phases:e.phase,...C.length<z.length?{dataTypes:C.join(",")}:{}}),className:"text-foreground hover:text-accent transition-colors cursor-pointer",children:[a.mean>=0?"+":"",a.mean,"%"," ",(0,t.jsxs)("span",{className:"text-muted text-xs",children:["(",a.count,")"]})]}):(0,t.jsx)("span",{className:"text-muted",children:"—"})},r)})]},e.phase))})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"bg-surface border border-border rounded-xl p-5",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold text-foreground mb-4",children:g("analytics.factsByYear")}),(0,t.jsx)(x.ResponsiveContainer,{width:"100%",height:240,children:(0,t.jsxs)(s.BarChart,{data:$.byYear,margin:{top:5,right:10,bottom:5,left:0},className:"cursor-pointer",children:[(0,t.jsx)(d.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e4e4e7",vertical:!1}),(0,t.jsx)(o.XAxis,{dataKey:"year",tick:{fill:"#71717a",fontSize:12}}),(0,t.jsx)(c.YAxis,{tick:{fill:"#71717a",fontSize:12}}),(0,t.jsx)(m.Tooltip,{contentStyle:{backgroundColor:"#18181b",border:"1px solid #27272a",borderRadius:"8px",fontSize:"12px"},labelStyle:{color:"#a1a1aa"},itemStyle:{color:"#e4e4e7"}}),(0,t.jsx)(i.Bar,{dataKey:"count",radius:[4,4,0,0],fill:"#3b82f6",fillOpacity:.8,cursor:"pointer",onClick:H(e=>I({years:e.year}))})]})})]}),(0,t.jsxs)("div",{className:"bg-surface border border-border rounded-xl p-5",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold text-foreground mb-4",children:g("analytics.factsByDataType")}),(0,t.jsx)(x.ResponsiveContainer,{width:"100%",height:240,children:(0,t.jsxs)(s.BarChart,{data:$.byDataType,layout:"vertical",margin:{top:5,right:10,bottom:5,left:10},className:"cursor-pointer",children:[(0,t.jsx)(d.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e4e4e7",horizontal:!1}),(0,t.jsx)(o.XAxis,{type:"number",tick:{fill:"#71717a",fontSize:12}}),(0,t.jsx)(c.YAxis,{type:"category",dataKey:"label",tick:{fill:"#71717a",fontSize:12},width:80}),(0,t.jsx)(m.Tooltip,{contentStyle:{backgroundColor:"#18181b",border:"1px solid #27272a",borderRadius:"8px",fontSize:"12px"},labelStyle:{color:"#a1a1aa"},itemStyle:{color:"#e4e4e7"}}),(0,t.jsx)(i.Bar,{dataKey:"count",radius:[0,4,4,0],cursor:"pointer",onClick:H(e=>I({dataTypes:e.dataType})),children:$.byDataType.map(e=>(0,t.jsx)(p.Cell,{fill:O[e.dataType],fillOpacity:.8},e.dataType))})]})})]}),(0,t.jsxs)("div",{className:"bg-surface border border-border rounded-xl p-5",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold text-foreground mb-4",children:g("analytics.factsByPhase")}),(0,t.jsx)(x.ResponsiveContainer,{width:"100%",height:240,children:(0,t.jsxs)(s.BarChart,{data:$.byPhase,layout:"vertical",margin:{top:5,right:10,bottom:5,left:10},className:"cursor-pointer",children:[(0,t.jsx)(d.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e4e4e7",horizontal:!1}),(0,t.jsx)(o.XAxis,{type:"number",tick:{fill:"#71717a",fontSize:12}}),(0,t.jsx)(c.YAxis,{type:"category",dataKey:"phase",tick:{fill:"#71717a",fontSize:12},width:65}),(0,t.jsx)(m.Tooltip,{contentStyle:{backgroundColor:"#18181b",border:"1px solid #27272a",borderRadius:"8px",fontSize:"12px"},labelStyle:{color:"#a1a1aa"},itemStyle:{color:"#e4e4e7"}}),(0,t.jsx)(i.Bar,{dataKey:"count",radius:[0,4,4,0],fill:"#06b6d4",fillOpacity:.8,cursor:"pointer",onClick:H(e=>I({phases:e.phase}))})]})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-surface border border-border rounded-xl p-5",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold text-foreground mb-4",children:g("analytics.yearPhase")}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left text-muted text-xs py-2 pr-3",children:g("common.phase")}),h.ALL_YEARS.map(e=>(0,t.jsx)("th",{className:"text-center text-muted text-xs py-2 px-2",children:e},e))]})}),(0,t.jsx)("tbody",{children:$.yearPhaseMatrix.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"text-foreground py-1.5 pr-3 font-medium",children:e.phase}),h.ALL_YEARS.map(r=>{let a=e[String(r)];return(0,t.jsx)("td",{className:"px-2 py-1.5 text-center",children:(0,t.jsx)("button",{onClick:()=>a>0&&I({years:String(r),phases:e.phase}),disabled:0===a,className:`inline-block w-10 rounded px-2 py-0.5 text-xs font-medium transition-opacity ${_(a,$.maxYearPhase)} ${a>0?"cursor-pointer hover:opacity-80":"cursor-default"}`,children:a})},r)})]},e.phase))})]})})]}),(0,t.jsxs)("div",{className:"bg-surface border border-border rounded-xl p-5",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold text-foreground mb-4",children:g("analytics.yearDataType")}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left text-muted text-xs py-2 pr-3",children:g("common.type")}),h.ALL_YEARS.map(e=>(0,t.jsx)("th",{className:"text-center text-muted text-xs py-2 px-2",children:e},e))]})}),(0,t.jsx)("tbody",{children:$.yearDataTypeMatrix.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"text-foreground py-1.5 pr-3 font-medium",children:e.dataType}),h.ALL_YEARS.map(r=>{let a=e[String(r)];return(0,t.jsx)("td",{className:"px-2 py-1.5 text-center",children:(0,t.jsx)("button",{onClick:()=>a>0&&I({years:String(r),dataTypes:e.rawDataType}),disabled:0===a,className:`inline-block w-10 rounded px-2 py-0.5 text-xs font-medium transition-opacity ${_(a,$.maxYearDt)} ${a>0?"cursor-pointer hover:opacity-80":"cursor-default"}`,children:a})},r)})]},e.dataType))})]})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-surface border border-border rounded-xl p-5",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold text-foreground mb-4",children:g("analytics.credByPhase")}),(0,t.jsx)(x.ResponsiveContainer,{width:"100%",height:240,children:(0,t.jsxs)(s.BarChart,{data:$.credByPhase,layout:"vertical",margin:{top:5,right:10,bottom:5,left:10},className:"cursor-pointer",children:[(0,t.jsx)(d.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e4e4e7",horizontal:!1}),(0,t.jsx)(o.XAxis,{type:"number",tick:{fill:"#71717a",fontSize:12}}),(0,t.jsx)(c.YAxis,{type:"category",dataKey:"phase",tick:{fill:"#71717a",fontSize:12},width:65}),(0,t.jsx)(m.Tooltip,{contentStyle:{backgroundColor:"#18181b",border:"1px solid #27272a",borderRadius:"8px",fontSize:"12px"},labelStyle:{color:"#a1a1aa"}}),(0,t.jsx)(u.Legend,{iconSize:10,wrapperStyle:{fontSize:"11px",color:"#a1a1aa"}}),(0,t.jsx)(i.Bar,{dataKey:"high",stackId:"cred",name:"High (3)",fill:L[3],fillOpacity:.8,cursor:"pointer",onClick:H(e=>I({phases:e.phase}))}),(0,t.jsx)(i.Bar,{dataKey:"medium",stackId:"cred",name:"Medium (2)",fill:L[2],fillOpacity:.8,cursor:"pointer",onClick:H(e=>I({phases:e.phase}))}),(0,t.jsx)(i.Bar,{dataKey:"low",stackId:"cred",name:"Low (1)",fill:L[1],fillOpacity:.8,radius:[0,4,4,0],cursor:"pointer",onClick:H(e=>I({phases:e.phase}))})]})})]}),(0,t.jsxs)("div",{className:"bg-surface border border-border rounded-xl p-5",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold text-foreground mb-4",children:g("analytics.top10Sources")}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-border",children:[(0,t.jsx)("th",{className:"text-left text-muted text-xs py-2 pr-2",children:g("analytics.colHash")}),(0,t.jsx)("th",{className:"text-left text-muted text-xs py-2 pr-2",children:g("analytics.colSource")}),(0,t.jsx)("th",{className:"text-center text-muted text-xs py-2 px-2",children:g("analytics.colFacts")}),(0,t.jsx)("th",{className:"text-center text-muted text-xs py-2 px-2",children:g("analytics.colPhases")}),(0,t.jsx)("th",{className:"text-center text-muted text-xs py-2 px-2",children:g("analytics.colTypes")}),(0,t.jsx)("th",{className:"text-right text-muted text-xs py-2",children:g("analytics.colAvgImpact")})]})}),(0,t.jsx)("tbody",{children:$.topSources.map((e,r)=>(0,t.jsxs)("tr",{className:"border-b border-border/50 cursor-pointer hover:bg-surface-hover transition-colors",onClick:()=>I({phases:e.phases.join(","),dataTypes:e.dataTypes.join(",")}),children:[(0,t.jsx)("td",{className:"text-muted py-1.5 pr-2 text-xs",children:r+1}),(0,t.jsx)("td",{className:"text-foreground py-1.5 pr-2 max-w-[180px] truncate",title:e.name,children:e.name}),(0,t.jsx)("td",{className:"text-center text-foreground py-1.5 px-2 font-medium",children:e.count}),(0,t.jsx)("td",{className:"text-center text-muted py-1.5 px-2 text-xs",children:e.phases.length}),(0,t.jsx)("td",{className:"text-center py-1.5 px-2",children:(0,t.jsx)("div",{className:"flex gap-1 justify-center flex-wrap",children:e.dataTypes.map(e=>(0,t.jsx)("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${T[e]}`,children:e},e))})}),(0,t.jsx)("td",{className:"text-right py-1.5 font-medium",children:(0,t.jsxs)("span",{className:e.avgImpact>=0?"text-emerald-400":"text-red-400",children:[e.avgImpact>=0?"+":"",e.avgImpact.toFixed(0),"%"]})})]},e.name))})]})})]})]})]})]})}e.s(["default",()=>D],96673)},48503,e=>{e.v(t=>Promise.all(["static/chunks/adabfc2d4bff09a9.js"].map(t=>e.l(t))).then(()=>t(15833)))},70653,e=>{e.v(t=>Promise.all(["static/chunks/049ce48f7172c019.js"].map(t=>e.l(t))).then(()=>t(24154)))},95111,e=>{e.v(t=>Promise.all(["static/chunks/b8a392715cb48bcd.js"].map(t=>e.l(t))).then(()=>t(38201)))}]);