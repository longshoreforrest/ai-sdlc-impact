(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78917,e=>{"use strict";let t=(0,e.i(75254).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],78917)},21345,e=>{"use strict";let t=(0,e.i(75254).default)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);e.s(["Link",()=>t],21345)},60398,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(22016),l=e.i(41240),r=e.i(21345),n=e.i(78917),d=e.i(10980),i=e.i(43531),c=e.i(3116),m=e.i(23622),o=e.i(75254);let x=(0,o.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),u=(0,o.default)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);var p=e.i(64659),h=e.i(55900),g=e.i(52057);e.i(57229);var b=e.i(44674);let f={pending:{labelKey:"common.pending",bg:"bg-zinc-500/10 text-zinc-400",dot:"bg-zinc-400"},accepted:{labelKey:"common.accepted",bg:"bg-emerald-500/10 text-emerald-400",dot:"bg-emerald-400"},rejected:{labelKey:"common.rejected",bg:"bg-red-500/10 text-red-400",dot:"bg-red-400"},postponed:{labelKey:"common.postponed",bg:"bg-amber-500/10 text-amber-400",dot:"bg-amber-400"}},j={critical:{labelKey:"common.critical",className:"bg-red-500/10 text-red-400"},important:{labelKey:"common.important",className:"bg-amber-500/10 text-amber-400"},"nice-to-have":{labelKey:"common.niceToHave",className:"bg-zinc-500/10 text-muted"}},N=[{status:"accepted",icon:i.Check,titleKey:"common.accept"},{status:"postponed",icon:c.Clock,titleKey:"common.postpone"},{status:"rejected",icon:m.Ban,titleKey:"common.reject"}],v={implement:{labelKey:"agentAnalysis.verdictImplement",bg:"bg-emerald-500/10 text-emerald-500",dot:"bg-emerald-500"},defer:{labelKey:"agentAnalysis.verdictDefer",bg:"bg-amber-500/10 text-amber-500",dot:"bg-amber-500"},reject:{labelKey:"agentAnalysis.verdictReject",bg:"bg-red-500/10 text-red-500",dot:"bg-red-500"},"needs-clarification":{labelKey:"agentAnalysis.verdictClarify",bg:"bg-blue-500/10 text-blue-500",dot:"bg-blue-500"}};function y(e){return new Date(e).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}function w({status:e}){let{t:s}=(0,b.useTranslation)(),a=f[e];return(0,t.jsxs)("span",{className:`inline-flex items-center gap-1.5 text-xs px-2.5 py-1 rounded-full ${a.bg}`,children:[(0,t.jsx)("span",{className:`w-1.5 h-1.5 rounded-full ${a.dot}`}),s(a.labelKey)]})}function k({currentStatus:e,onStatusChange:s}){let{t:a}=(0,b.useTranslation)();return(0,t.jsx)("div",{className:"flex gap-1",children:N.map(({status:l,icon:r,titleKey:n})=>(0,t.jsx)("button",{onClick:()=>s(l===e?"pending":l),title:l===e?a("common.resetToPending"):a(n),className:`p-1.5 rounded-md transition-colors ${l===e?f[l].bg:"text-muted hover:text-foreground hover:bg-surface-hover"}`,children:(0,t.jsx)(r,{className:"w-3.5 h-3.5"})},l))})}function S({feature:e}){let{t:a}=(0,b.useTranslation)(),[l,r]=(0,s.useState)(!1),n=e.agentAnalysis;if(!n)return null;let d=v[n.verdict];return(0,t.jsxs)("div",{className:"mt-4 border border-purple-500/20 rounded-lg overflow-hidden",children:[(0,t.jsxs)("button",{onClick:()=>r(!l),className:"w-full flex items-center justify-between px-4 py-2.5 bg-purple-500/5 hover:bg-purple-500/10 transition-colors text-left",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u,{className:"w-4 h-4 text-purple-400"}),(0,t.jsx)("span",{className:"text-xs font-medium text-purple-400 uppercase tracking-wider",children:a("agentAnalysis.title")}),(0,t.jsxs)("span",{className:`inline-flex items-center gap-1.5 text-xs px-2 py-0.5 rounded-full ${d.bg}`,children:[(0,t.jsx)("span",{className:`w-1.5 h-1.5 rounded-full ${d.dot}`}),a(d.labelKey)]})]}),l?(0,t.jsx)(h.ChevronUp,{className:"w-4 h-4 text-purple-400"}):(0,t.jsx)(p.ChevronDown,{className:"w-4 h-4 text-purple-400"})]}),l&&(0,t.jsxs)("div",{className:"px-4 py-4 space-y-4 bg-purple-500/[0.02]",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-xs font-semibold text-purple-400 uppercase tracking-wider mb-2",children:["1. ",a("agentAnalysis.userStory")]}),(0,t.jsx)("div",{className:"text-sm text-muted leading-relaxed space-y-2",children:n.userStory.split("\n").filter(Boolean).map((e,s)=>(0,t.jsx)("p",{children:e},s))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-xs font-semibold text-purple-400 uppercase tracking-wider mb-2",children:["2. ",a("agentAnalysis.alignment")]}),(0,t.jsx)("div",{className:"text-sm text-muted leading-relaxed space-y-2",children:n.alignmentAnalysis.split("\n").filter(Boolean).map((e,s)=>(0,t.jsx)("p",{children:e},s))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-xs font-semibold text-purple-400 uppercase tracking-wider mb-2",children:["3. ",a("agentAnalysis.verdict")]}),(0,t.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,t.jsxs)("span",{className:`inline-flex items-center gap-1.5 text-sm font-medium px-3 py-1 rounded-full ${d.bg}`,children:[(0,t.jsx)("span",{className:`w-2 h-2 rounded-full ${d.dot}`}),a(d.labelKey)]})}),(0,t.jsx)("p",{className:"text-sm text-muted leading-relaxed",children:n.verdictReason})]}),(0,t.jsx)("p",{className:"text-[10px] text-muted/60 pt-2 border-t border-purple-500/10",children:a("agentAnalysis.analyzedOn",{date:y(n.analyzedAt)})})]})]})}function $({feature:e,onStatusChange:s}){let{t:a}=(0,b.useTranslation)(),l=e.status||"pending",r=j[e.priority],n="accepted"===l&&!!e.implementedAt;return(0,t.jsxs)("div",{className:`group bg-surface rounded-xl overflow-hidden transition-colors ${n?"border-2 border-emerald-500/30":"border border-border hover:border-muted"}`,children:[n&&(0,t.jsxs)("div",{className:"bg-emerald-500/10 px-5 py-2.5 flex items-center gap-2 border-b border-emerald-500/20",children:[(0,t.jsx)("div",{className:"w-5 h-5 rounded-full bg-emerald-500 flex items-center justify-center",children:(0,t.jsx)(i.Check,{className:"w-3 h-3 text-white"})}),(0,t.jsx)("span",{className:"text-sm font-medium text-emerald-500",children:a("common.implemented")}),(0,t.jsx)("span",{className:"text-xs text-emerald-400/70 ml-auto",children:y(e.implementedAt)})]}),(0,t.jsxs)("div",{className:"p-5",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-foreground mb-1.5",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-muted leading-relaxed line-clamp-2",children:e.description})]}),(0,t.jsx)(k,{currentStatus:l,onStatusChange:s})]}),(0,t.jsx)(S,{feature:e}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-border/50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(w,{status:l}),(0,t.jsx)("span",{className:`text-xs px-2.5 py-1 rounded-full ${r.className}`,children:a(r.labelKey)})]}),(0,t.jsxs)("span",{className:"text-xs text-muted",children:[a("fromUsers.suggested")," ",y(e.createdAt),e.submitterName&&(0,t.jsxs)(t.Fragment,{children:[" Â· ",a("suggestFeature.submittedBy",{name:e.submitterName})]})]})]})]})]})}function A({source:e,onStatusChange:s}){let{t:l}=(0,b.useTranslation)(),r=e.status||"pending",c="accepted"===r;return(0,t.jsxs)("div",{className:`group bg-surface rounded-xl overflow-hidden transition-colors ${c?"border-2 border-emerald-500/30":"border border-border hover:border-muted"}`,children:[c&&(0,t.jsxs)("div",{className:"bg-emerald-500/10 px-5 py-2.5 flex items-center gap-2 border-b border-emerald-500/20",children:[(0,t.jsx)("div",{className:"w-5 h-5 rounded-full bg-emerald-500 flex items-center justify-center",children:(0,t.jsx)(i.Check,{className:"w-3 h-3 text-white"})}),(0,t.jsx)("span",{className:"text-sm font-medium text-emerald-500",children:l("fromUsers.acceptedAsSource")}),e.linkedSourceId&&(0,t.jsxs)(a.default,{href:`/sources?search=${encodeURIComponent(e.linkedSourceId)}`,className:"inline-flex items-center gap-1 text-xs text-emerald-400 hover:underline ml-auto",children:[(0,t.jsx)(d.BookOpen,{className:"w-3 h-3"}),e.linkedSourceId]})]}),(0,t.jsxs)("div",{className:"p-5",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-semibold text-accent hover:underline flex items-center gap-1.5 truncate mb-1.5",title:e.url,children:[e.name||e.url,(0,t.jsx)(n.ExternalLink,{className:"w-3.5 h-3.5 shrink-0"})]}),e.description&&(0,t.jsx)("p",{className:"text-sm text-muted leading-relaxed line-clamp-2",children:e.description})]}),(0,t.jsx)(k,{currentStatus:r,onStatusChange:s})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[e.phase&&(0,t.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-md bg-zinc-100 text-muted",children:e.phase}),e.dataType&&(0,t.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-md bg-zinc-100 text-muted capitalize",children:e.dataType}),void 0!==e.impactPct&&(0,t.jsxs)("span",{className:`text-xs font-medium ${e.impactPct>=0?"text-emerald-500":"text-red-400"}`,children:[e.impactPct>=0?"+":"",e.impactPct,"%"]}),e.year&&(0,t.jsx)("span",{className:"text-xs text-muted",children:e.year})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-border/50",children:[(0,t.jsx)(w,{status:r}),(0,t.jsxs)("span",{className:"text-xs text-muted",children:[l("fromUsers.suggested")," ",y(e.createdAt)]})]})]})]})}function C({label:e,value:s,icon:a,accent:l}){return(0,t.jsxs)("div",{className:"bg-surface border border-border rounded-xl p-5 flex items-center gap-4",children:[(0,t.jsx)("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${l||"bg-accent/10"}`,children:(0,t.jsx)(a,{className:`w-5 h-5 ${l?"text-white":"text-accent"}`})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold tabular-nums text-foreground",children:s}),(0,t.jsx)("p",{className:"text-xs text-muted",children:e})]})]})}function K({type:e}){let{t:s}=(0,b.useTranslation)();return(0,t.jsxs)("div",{className:"text-center py-12 bg-surface border border-border rounded-xl",children:["features"===e?(0,t.jsx)(l.Lightbulb,{className:"w-8 h-8 text-muted mx-auto mb-3"}):(0,t.jsx)(r.Link,{className:"w-8 h-8 text-muted mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-sm text-muted",children:s("features"===e?"fromUsers.noFeatures":"fromUsers.noSources")})]})}function U(){let{t:e}=(0,b.useTranslation)(),[a,n]=(0,s.useState)([]),[d,m]=(0,s.useState)([]),[o,u]=(0,s.useState)("all");(0,s.useEffect)(()=>{(0,g.fetchFeatureSuggestions)().then(n),(0,g.fetchSourceSuggestions)().then(m)},[]);let p=(0,s.useMemo)(()=>"all"===o?a:a.filter(e=>(e.status||"pending")===o),[a,o]),h=(0,s.useMemo)(()=>"all"===o?d:d.filter(e=>(e.status||"pending")===o),[d,o]),f=(0,s.useMemo)(()=>{let e=[...a.map(e=>e.status||"pending"),...d.map(e=>e.status||"pending")];return{total:e.length,pending:e.filter(e=>"pending"===e).length,accepted:e.filter(e=>"accepted"===e).length,rejected:e.filter(e=>"rejected"===e).length,postponed:e.filter(e=>"postponed"===e).length}},[a,d]);async function j(e,t){await (0,g.updateFeatureSuggestionStatus)(e,t),n(await (0,g.fetchFeatureSuggestions)())}async function N(e,t){await (0,g.updateSourceSuggestionStatus)(e,t),m(await (0,g.fetchSourceSuggestions)())}let v=[{value:"all",label:`${e("fromUsers.all")} (${f.total})`},{value:"pending",label:`${e("common.pending")} (${f.pending})`},{value:"accepted",label:`${e("common.accepted")} (${f.accepted})`},{value:"postponed",label:`${e("common.postponed")} (${f.postponed})`},{value:"rejected",label:`${e("common.rejected")} (${f.rejected})`}];return(0,t.jsxs)("div",{className:"max-w-5xl space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:e("fromUsers.title")}),(0,t.jsx)("p",{className:"text-sm text-muted mt-1",children:e("fromUsers.subtitle")})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsx)(C,{label:e("fromUsers.featureRequests"),value:a.length,icon:l.Lightbulb}),(0,t.jsx)(C,{label:e("fromUsers.sourceSuggestions"),value:d.length,icon:r.Link}),(0,t.jsx)(C,{label:e("common.accepted"),value:f.accepted,icon:i.Check,accent:"bg-emerald-500"}),(0,t.jsx)(C,{label:e("fromUsers.pendingReview"),value:f.pending,icon:c.Clock,accent:"bg-zinc-500"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x,{className:"w-4 h-4 text-muted"}),(0,t.jsx)("div",{className:"flex gap-1.5",children:v.map(({value:e,label:s})=>(0,t.jsx)("button",{onClick:()=>u(e),className:`px-3 py-1.5 text-xs rounded-lg border transition-colors ${o===e?"bg-accent-dim text-accent border-accent/30 font-medium":"bg-surface text-muted border-border hover:text-foreground hover:border-muted"}`,children:s},e))})]}),(0,t.jsxs)("section",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2.5 mb-4",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-amber-500/10 flex items-center justify-center",children:(0,t.jsx)(l.Lightbulb,{className:"w-4 h-4 text-amber-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-base font-semibold text-foreground",children:e("fromUsers.featureRequests")}),(0,t.jsx)("p",{className:"text-xs text-muted",children:e("fromUsers.requestCount",{count:p.length})})]})]}),0===p.length?(0,t.jsx)(K,{type:"features"}):(0,t.jsx)("div",{className:"space-y-3",children:p.map(e=>(0,t.jsx)($,{feature:e,onStatusChange:t=>j(e.id,t)},e.id))})]}),(0,t.jsxs)("section",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2.5 mb-4",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center",children:(0,t.jsx)(r.Link,{className:"w-4 h-4 text-blue-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-base font-semibold text-foreground",children:e("fromUsers.dataSrcSuggestions")}),(0,t.jsx)("p",{className:"text-xs text-muted",children:e("fromUsers.suggestionCount",{count:h.length})})]})]}),0===h.length?(0,t.jsx)(K,{type:"sources"}):(0,t.jsx)("div",{className:"space-y-3",children:h.map(e=>(0,t.jsx)(A,{source:e,onStatusChange:t=>N(e.id,t)},e.id))})]})]})}e.s(["default",()=>U],60398)}]);